'use strict';

var bind = require('function-bind');
var GetIntrinsic = require('get-intrinsic');
var setFunctionLength = require('set-function-length');

<<<<<<< HEAD
var $TypeError = require('es-errors/type');
=======
var $TypeError = GetIntrinsic('%TypeError%');
>>>>>>> 8e46134856c44712b7cfc30f39a5f0bfc1da907f
var $apply = GetIntrinsic('%Function.prototype.apply%');
var $call = GetIntrinsic('%Function.prototype.call%');
var $reflectApply = GetIntrinsic('%Reflect.apply%', true) || bind.call($call, $apply);

<<<<<<< HEAD
var $defineProperty = require('es-define-property');
=======
var $defineProperty = GetIntrinsic('%Object.defineProperty%', true);
>>>>>>> 8e46134856c44712b7cfc30f39a5f0bfc1da907f
var $max = GetIntrinsic('%Math.max%');

module.exports = function callBind(originalFunction) {
	if (typeof originalFunction !== 'function') {
		throw new $TypeError('a function is required');
	}
	var func = $reflectApply(bind, $call, arguments);
	return setFunctionLength(
		func,
		1 + $max(0, originalFunction.length - (arguments.length - 1)),
		true
	);
};

var applyBind = function applyBind() {
	return $reflectApply(bind, $apply, arguments);
};

if ($defineProperty) {
	$defineProperty(module.exports, 'apply', { value: applyBind });
} else {
	module.exports.apply = applyBind;
}
